<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Create Person</title>
    <style>
      body { font-family: Arial, sans-serif; padding: 2rem; }
      form { max-width: 480px; }
      label { display:block; margin-top: 0.5rem; }
      input[type=text], input[type=email] { width:100%; padding:0.5rem; }
      .success { background:#e6ffed; border:1px solid #8ee0a6; padding:1rem; margin-bottom:1rem; }
    </style>
  </head>
  <body>
    <h1>Create Person</h1>

    {% if success %}
    <div class="success">
      Person saved! {% if person %}ID: {{ person.id }} â€” {{ person.first_name }} {{ person.last_name }} ({{ person.email }}){% endif %}
    </div>
    {% endif %}

    <form method="post" action="/persons/new">
      <label for="first_name">First name</label>
      <input id="first_name" name="first_name" type="text" required>

      <label for="last_name">Last name</label>
      <input id="last_name" name="last_name" type="text" required>

      <label for="email">Email</label>
      <input id="email" name="email" type="email" required>

      <div style="margin-top:1rem">
        <button type="submit">Save</button>
      </div>
    </form>

    <hr style="margin:2rem 0">

    <h2>Lookup person by ID</h2>
    <p>Enter a person ID and click Lookup to open the person's page.</p>
    <form id="lookupForm">
      <label for="person_id">Person ID</label>
      <input id="person_id" name="person_id" type="number" min="1" required>
      <div style="margin-top:1rem">
        <button type="submit">Lookup</button>
      </div>
    </form>

    <script>
      // Redirect to the person detail endpoint using the entered ID.
      document.getElementById('lookupForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const id = document.getElementById('person_id').value;
        if (!id) return;
        // Use the singular /persons/{id} path (consistent with /person/new in this project)
        window.location.href = '/persons/' + encodeURIComponent(id);
      });
    </script>

  </body>
</html>
